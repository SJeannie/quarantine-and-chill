{"version":3,"sources":["../src/metadata.js"],"names":["store","skippedPrototypes","Object","prototype","Function","EventEmitter","undefined","getMetadata","object","key","metadata","placement","target","__proto__","includes","Class","constructor","namespace","name","saveMetadata","assign","className"],"mappings":";;;;;;;AAAA;;;;;;;;AAEA,MAAMA,KAAK,GAAG,EAAd;AACA,MAAMC,iBAAiB,GAAG,CAACC,MAAM,CAACC,SAAR,EAAmBC,QAAQ,CAACD,SAA5B,EAAuCE,2BAAaF,SAApD,EAA+DG,SAA/D,EAA0E,IAA1E,CAA1B;;AAEA,MAAMC,WAAW,GAAG,CAACC,MAAD,EAASC,GAAT,KAAiB;AAEjC,MAAIC,QAAQ,GAAG,EAAf;AACA,MAAIC,SAAS,GAAG,OAAOH,MAAP,IAAiB,UAAjB,GAA8B,GAA9B,GAAoC,GAApD;;AAEA,OAAK,IAAII,MAAM,GAAG,OAAOJ,MAAP,IAAiB,UAAjB,GAA8BA,MAAM,CAACL,SAArC,GAAiDK,MAAM,CAACK,SAA1E,EAAqF,CAACZ,iBAAiB,CAACa,QAAlB,CAA2BF,MAA3B,CAAtF,EAA0HA,MAAM,GAAGA,MAAM,CAACC,SAA1I,EAAqJ;AACjJ,QAAIE,KAAK,GAAGH,MAAM,CAACI,WAAnB;AACA,QAAIC,SAAS,GAAI,GAAEF,KAAK,CAACG,IAAK,GAAEP,SAAU,GAAEF,GAAI,EAAhD;AACAC,IAAAA,QAAQ,mCAAQV,KAAK,CAACiB,SAAD,CAAb,GAA6BP,QAA7B,CAAR;AACH;;AAED,SAAOA,QAAP;AACH,CAZD;;AAcA,MAAMS,YAAY,GAAG,CAACP,MAAD,EAASH,GAAT,EAAcC,QAAd,KAA2B;AAC5C,MAAIK,KAAK,GAAG,OAAOH,MAAP,IAAiB,UAAjB,GAA8BA,MAA9B,GAAuCA,MAAM,CAACI,WAA1D;AACA,MAAIL,SAAS,GAAG,OAAOC,MAAP,IAAiB,UAAjB,GAA8B,GAA9B,GAAoC,GAApD;AACA,MAAIK,SAAS,GAAI,GAAEF,KAAK,CAACG,IAAK,GAAEP,SAAU,GAAEF,GAAI,EAAhD;AACAT,EAAAA,KAAK,CAACiB,SAAD,CAAL,GAAmBjB,KAAK,CAACiB,SAAD,CAAL,IAAoB,EAAvC;AACAf,EAAAA,MAAM,CAACkB,MAAP,CAAcpB,KAAK,CAACiB,SAAD,CAAnB,kCAAqCP,QAArC;AAA+CW,IAAAA,SAAS,EAAEN,KAAK,CAACG,IAAhE;AAAsET,IAAAA,GAAtE;AAA2EM,IAAAA,KAAK,EAAEA,KAAlF;AAAyFE,IAAAA;AAAzF;AACH,CAND;;AAQA,MAAMP,QAAQ,GAAGV,KAAjB;QAESO,W,GAAAA,W;QAAaY,Y,GAAAA,Y;QAAcT,Q,GAAAA,Q","sourcesContent":["import { EventEmitter } from \"./EventEmitter\"\r\n\r\nconst store = {}\r\nconst skippedPrototypes = [Object.prototype, Function.prototype, EventEmitter.prototype, undefined, null]\r\n\r\nconst getMetadata = (object, key) => {\r\n\r\n    let metadata = {}\r\n    let placement = typeof object == 'function' ? '.' : '#'\r\n\r\n    for (let target = typeof object == 'function' ? object.prototype : object.__proto__; !skippedPrototypes.includes(target); target = target.__proto__) {\r\n        let Class = target.constructor\r\n        let namespace = `${Class.name}${placement}${key}`\r\n        metadata = { ...store[namespace], ...metadata }\r\n    }\r\n    \r\n    return metadata\r\n}\r\n\r\nconst saveMetadata = (target, key, metadata) => {\r\n    let Class = typeof target == 'function' ? target : target.constructor\r\n    let placement = typeof target == 'function' ? '.' : '#'\r\n    let namespace = `${Class.name}${placement}${key}`\r\n    store[namespace] = store[namespace] || {}\r\n    Object.assign(store[namespace], { ...metadata, className: Class.name, key, Class: Class, namespace })\r\n}\r\n\r\nconst metadata = store;\r\n\r\nexport { getMetadata, saveMetadata, metadata }"],"file":"metadata.js"}