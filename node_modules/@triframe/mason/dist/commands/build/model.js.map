{"version":3,"sources":["../../../src/commands/build/model.js"],"names":["program","_","args","decorators","path","name","instructions","definition","reduce","part","index","includes","defaults","split","decorator","code","Object","keys","join","fs","writeFile"],"mappings":";;;;;;AAAA;;kBAEe,OAAOA,OAAP,EAAgBC,CAAhB,EAAmBC,IAAnB,KAA4B;AACvC,MAAIC,UAAU,GAAG,EAAjB;AACA,MAAI,CAAEC,IAAF,EAAQC,IAAR,EAAc,GAAGC,YAAjB,IAAiCJ,IAArC;AACA,MAAIK,UAAU,GAAGD,YAAY,CAACE,MAAb,CAAqB,CAAED,UAAF,EAAcE,IAAd,EAAoBC,KAApB,KAA+B;AACjE,QAAGD,IAAI,CAACE,QAAL,CAAc,GAAd,CAAH,EAAsB;AAClB,UAAI,CAAEN,IAAF,EAAQO,QAAQ,GAAG,EAAnB,IAA0BH,IAAI,CAACI,KAAL,CAAW,GAAX,CAA9B,CADkB,CAElB;AACA;AACA;AACA;AACA;AACA;;AACAN,MAAAA,UAAU,GAAK,GAAEA,UAAW,OAAMF,IAAK,MAAKO,QAAS,IAArD;AACH,KATD,MASO;AACH,UAAIE,SAAS,GAAGL,IAAhB;AACAN,MAAAA,UAAU,CAACW,SAAS,CAACD,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CAAD,CAAV,GAAsC,IAAtC;AACAN,MAAAA,UAAU,GAAI,IAAGA,UAAW,QAAOO,SAAU,EAA7C;AACH;;AACD,WAAOP,UAAP;AACH,GAhBgB,EAgBd,EAhBc,CAAjB;AAiBA,MAAIQ,IAAI,GAAG;2BACYC,MAAM,CAACC,IAAP,CAAYd,UAAZ,EAAwBe,IAAxB,CAA6B,IAA7B,CAAoC;;eAEhDb,IAAK;;EAElBE,UAAW;EALT;;AAQAY,YAAGC,SAAH,CAAc,KAAIhB,IAAK,KAAvB,EAA6BW,IAA7B;AACH,C","sourcesContent":["import { fs } from '../../utils'\r\n\r\nexport default async (program, _, args) => {\r\n    let decorators = {}\r\n    var [ path, name, ...instructions] = args;\r\n    let definition = instructions.reduce( ( definition, part, index ) => {\r\n        if(part.includes('=')){\r\n            let [ name, defaults = \"\" ] = part.split('=')\r\n            // defaults = defaults.replace('_', ' ')\r\n            // try {\r\n            //     JSON.parse(defaults)\r\n            // } catch {\r\n            //     defaults = `\"${defaults}\"`\r\n            // }\r\n            definition =  `${definition}\\n  ${name} = ${defaults}\\n`\r\n        } else {\r\n            let decorator = part\r\n            decorators[decorator.split('(')[0]] = true;\r\n            definition = ` ${definition}\\n  @${decorator}`\r\n        }\r\n        return definition\r\n    }, '')\r\n    var code= `import { Resource } from '@triframe/core'\r\nimport { Model, include, ${Object.keys(decorators).join(', ') } } from '@triframe/scribe'\r\n\r\nexport class ${name} extends Resource {\r\n@include(Model)\r\n${definition}\r\n}`\r\n\r\n    fs.writeFile(`./${path}.js`, code)\r\n}"],"file":"model.js"}