"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _utils = require("../../utils");

exports.default = async (program, _, args) => {
  let decorators = {};
  var [path, name, ...instructions] = args;
  let definition = instructions.reduce((definition, part, index) => {
    if (part.includes('=')) {
      let [name, defaults = ""] = part.split('='); // defaults = defaults.replace('_', ' ')
      // try {
      //     JSON.parse(defaults)
      // } catch {
      //     defaults = `"${defaults}"`
      // }

      definition = `${definition}\n  ${name} = ${defaults}\n`;
    } else {
      let decorator = part;
      decorators[decorator.split('(')[0]] = true;
      definition = ` ${definition}\n  @${decorator}`;
    }

    return definition;
  }, '');
  var code = `import { Resource } from '@triframe/core'
import { Model, include, ${Object.keys(decorators).join(', ')} } from '@triframe/scribe'

export class ${name} extends Resource {
@include(Model)
${definition}
}`;

  _utils.fs.writeFile(`./${path}.js`, code);
};
//# sourceMappingURL=model.js.map