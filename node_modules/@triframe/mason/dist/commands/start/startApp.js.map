{"version":3,"sources":["../../../src/commands/start/startApp.js"],"names":["startApp","state","apiPort","process","env","API_DEV_PORT","port","APP_DEV_PORT","environmentVariables","EnvironmentVariables","platform","PORT","REACT_APP_BACKEND_URL","printOut"],"mappings":";;;;;;;AAAA;;AAEO,MAAMA,QAAQ,WAARA,QAAQ,GAAG,YAAY;AAChC,MAAIC,KAAK,GAAG,MAAM,sBAAlB;AACA,MAAIC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,YAAZ,IAA4B,IAA1C;AACA,MAAIC,IAAI,GAAGH,OAAO,CAACC,GAAR,CAAYG,YAAZ,IAA4B,IAAvC;AACA,MAAIC,oBAAoB,GAAG,IAAIC,2BAAJ,EAA3B;;AACA,UAAOR,KAAK,CAACS,QAAb;AACI,SAAK,KAAL;AACIF,MAAAA,oBAAoB,CAACG,IAArB,GAA4BL,IAA5B;AACAE,MAAAA,oBAAoB,CAACI,qBAArB,GAA8C,oBAAmBV,OAAQ,EAAzE;AACA,YAAM,iBAAM,GAAEM,oBAAqB,sBAA7B,EAAoD;AACtDK,QAAAA,QAAQ,EAAE;AAD4C,OAApD,CAAN;AAGJ;;AACA,SAAK,QAAL;AACIL,MAAAA,oBAAoB,CAACI,qBAArB,GAA8C,UAAS,qBAAU,IAAGV,OAAQ,EAA5E,CADJ,CAEI;AACA;AACA;;AACA,YAAM,iBAAM,GAAEM,oBAAqB,2BAA7B,EAAyD;AAC3DK,QAAAA,QAAQ,EAAE;AADiD,OAAzD,CAAN;AAGJ;AAhBJ;AAkBH,CAvBM","sourcesContent":["import { getState, exec, EnvironmentVariables, getMyIP } from \"../../utils\"\r\n\r\nexport const startApp = async () => {\r\n    let state = await getState()\r\n    let apiPort = process.env.API_DEV_PORT || 8080\r\n    let port = process.env.APP_DEV_PORT || 8081\r\n    let environmentVariables = new EnvironmentVariables\r\n    switch(state.platform){\r\n        case 'web':\r\n            environmentVariables.PORT = port\r\n            environmentVariables.REACT_APP_BACKEND_URL = `http://localhost:${apiPort}`\r\n            await exec(`${environmentVariables} react-scripts start`, {\r\n                printOut: true\r\n            })\r\n        break;\r\n        case 'native':\r\n            environmentVariables.REACT_APP_BACKEND_URL = `http://${getMyIP()}:${apiPort}`\r\n            // TODO: Fix this to use the port. Throws stupid \"not integer error\"\r\n            // environmentVariables.WEB_PORT = port\r\n            // We have to clear the cache because babel won't detect changes in env variables\r\n            await exec(`${environmentVariables} expo start --web --clear`, {\r\n                printOut: true\r\n            })\r\n        break;\r\n    }\r\n}"],"file":"startApp.js"}