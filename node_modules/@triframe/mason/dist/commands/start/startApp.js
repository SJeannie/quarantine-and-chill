"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.startApp = undefined;

var _utils = require("../../utils");

const startApp = exports.startApp = async () => {
  let state = await (0, _utils.getState)();
  let apiPort = process.env.API_DEV_PORT || 8080;
  let port = process.env.APP_DEV_PORT || 8081;
  let environmentVariables = new _utils.EnvironmentVariables();

  switch (state.platform) {
    case 'web':
      environmentVariables.PORT = port;
      environmentVariables.REACT_APP_BACKEND_URL = `http://localhost:${apiPort}`;
      await (0, _utils.exec)(`${environmentVariables} react-scripts start`, {
        printOut: true
      });
      break;

    case 'native':
      environmentVariables.REACT_APP_BACKEND_URL = `http://${(0, _utils.getMyIP)()}:${apiPort}`; // TODO: Fix this to use the port. Throws stupid "not integer error"
      // environmentVariables.WEB_PORT = port
      // We have to clear the cache because babel won't detect changes in env variables

      await (0, _utils.exec)(`${environmentVariables} expo start --web --clear`, {
        printOut: true
      });
      break;
  }
};
//# sourceMappingURL=startApp.js.map