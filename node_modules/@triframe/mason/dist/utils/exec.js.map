{"version":3,"sources":["../../src/utils/exec.js"],"names":["exec","_exec","require","command","printOut","expectedCodes","Promise","resolve","reject","process","stderr","stdout","on","data","code","includes"],"mappings":";;;;;;;AAAA;;AACA,MAAM;AAAEA,EAAAA,IAAI,EAAEC;AAAR,IAAkBC,OAAO,CAAC,eAAD,CAA/B;;AAEO,MAAMF,IAAI,WAAJA,IAAI,GAAG,CAACG,OAAD,EAAU;AAAEC,EAAAA,QAAQ,GAAG,KAAb;AAAoBC,EAAAA,aAAa,GAAG,CAAE,CAAF;AAApC,IAA8C,EAAxD,KAA+D,IAAIC,OAAJ,CAAa,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACjH,MAAIC,OAAO,GAAGR,KAAK,CAACE,OAAD,CAAnB;;AACA,MAAIO,MAAM,GAAG,EAAb;AACA,MAAIC,MAAM,GAAG,EAAb;AACAF,EAAAA,OAAO,CAACE,MAAR,CAAeC,EAAf,CAAkB,MAAlB,EAA0BC,IAAI,IAAI;AAC9B,QAAGT,QAAQ,KAAK,IAAhB,EAAsB,aAAMS,IAAN,EAAtB,KACK,IAAG,OAAOT,QAAP,KAAoB,UAAvB,EAAmCA,QAAQ,CAACS,IAAD,CAAR;AACxCF,IAAAA,MAAM,GAAI,GAAEA,MAAO,GAAEE,IAAK,EAA1B;AACH,GAJD;AAKAJ,EAAAA,OAAO,CAACC,MAAR,CAAeE,EAAf,CAAkB,MAAlB,EAA0BC,IAAI,IAAIH,MAAM,GAAI,GAAEA,MAAO,GAAEG,IAAK,EAA5D;AACAJ,EAAAA,OAAO,CAACG,EAAR,CAAW,MAAX,EAAmBE,IAAI,IAAI;AACvB,QAAG,CAACT,aAAa,CAACU,QAAd,CAAuBD,IAAvB,CAAJ,EAAiC;AAC7BN,MAAAA,MAAM,CAACE,MAAD,CAAN;AACH,KAFD,MAEO;AACHH,MAAAA,OAAO,CAAC;AAAEG,QAAAA,MAAF;AAAUC,QAAAA,MAAV;AAAkBG,QAAAA;AAAlB,OAAD,CAAP;AACH;AACJ,GAND;AAOH,CAjBkF,CAA5E","sourcesContent":["import { print } from '.'\r\nconst { exec: _exec } = require('child_process')\r\n\r\nexport const exec = (command, { printOut = false, expectedCodes = [ 0 ] } = {}) => new Promise( (resolve, reject) => {\r\n    let process = _exec(command)\r\n    let stderr = ''\r\n    let stdout = ''\r\n    process.stdout.on('data', data => {\r\n        if(printOut === true) print(data)\r\n        else if(typeof printOut === 'function') printOut(data)\r\n        stdout = `${stdout}${data}`\r\n    })\r\n    process.stderr.on('data', data => stderr = `${stderr}${data}`)\r\n    process.on('exit', code => {\r\n        if(!expectedCodes.includes(code)){\r\n            reject(stderr)\r\n        } else {\r\n            resolve({ stderr, stdout, code })\r\n        }\r\n    })\r\n})"],"file":"exec.js"}