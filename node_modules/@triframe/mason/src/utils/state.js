import { fs, path } from '.'

export const STATE_STORAGE_PATH = '.triframe'

export const getState = async () => {
    try {
        let result = await fs.readFile(path.resolve(STATE_STORAGE_PATH))
        return JSON.parse(result)
    } catch (err) {
        return {}
    }
}

export const saveState = async (state) => {
    state = { ...await getState(), ...state }
    return fs.writeFile(path.resolve(STATE_STORAGE_PATH), JSON.stringify(state, null, 2))
}
