import cx from 'classnames';
import React, { Component } from 'react';
import InputSlider from 'react-input-slider';
import { withTheme } from '../../paper';

class Time extends Component {
  changeHours = pos => {
    let m = this.props.moment;
    m = m.set({ hours: pos.x});
    this.props.onChange(m);
  };

  changeMinutes = pos => {
    let m = this.props.moment;
    m = m.set({ minutes: pos.x});
    this.props.onChange(m);
  };

  render() {
    const m = this.props.moment;
    const theme = this.props.theme;

    return (
      <div className={cx('m-time', this.props.className)}>
        <div className="showtime">
          <span className="time" style={{ ...theme.fonts.regular }}>
            {m.toFormat('hh')}
          </span>
          <span className="separater" style={{ ...theme.fonts.regular }}>:</span>
          <span className="time" style={{ ...theme.fonts.regular }}>
            {m.toFormat('mm')}
          </span>
          <span className="separater" style={{ ...theme.fonts.regular }}>:</span>
          <span className="time" style={{ ...theme.fonts.regular }}>
            {m.toFormat('a')}
          </span>
        </div>

        <div className="sliders">
          <div className="time-text"  style={{ ...theme.fonts.regular }}>Hours:</div>
          <InputSlider
            className="u-slider-time"
            xmin={0}
            xmax={23}
            xstep={this.props.hourStep}
            x={m.hour}
            onChange={this.changeHours}
            styles={{ active: { backgroundColor: this.props.theme.colors.primary }}}
          />
          <div className="time-text"  style={{ ...theme.fonts.regular }} >Minutes:</div>
          <InputSlider
            className="u-slider-time"
            xmin={0}
            xmax={59}
            xstep={this.props.minStep}
            x={m.minute}
            onChange={this.changeMinutes}
            styles={{ active: { backgroundColor: this.props.theme.colors.primary }}}
          />
        </div>
      </div>
    );
  }
}

export default withTheme(Time)
