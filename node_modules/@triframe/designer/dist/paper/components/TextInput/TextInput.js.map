{"version":3,"sources":["../../../../src/paper/components/TextInput/TextInput.js"],"names":["BLUR_ANIMATION_DURATION","FOCUS_ANIMATION_DURATION","TextInput","arguments","state","labeled","Animated","Value","props","value","undefined","defaultValue","error","focused","placeholder","labelLayout","measured","width","height","showPlaceholder","timer","clearTimeout","setTimeout","setState","hidePlaceholder","showError","scale","theme","animation","timing","toValue","duration","useNativeDriver","Platform","select","ios","default","start","hideError","restoreLabel","minimizeLabel","handleFocus","args","disabled","editable","onFocus","handleBlur","onBlur","handleChangeText","onChangeText","handleLayoutAnimatedText","e","nativeEvent","layout","prevProps","prevState","label","root","setNativeProps","isFocused","clear","focus","blur","mode","rest","ref","nextProps","React","Component","defaultProps","dense","multiline","render"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { Animated, TextInput as NativeTextInput, Platform, } from 'react-native';\r\nimport TextInputOutlined from './TextInputOutlined';\r\nimport TextInputFlat from './TextInputFlat';\r\nimport { withTheme } from '../../core/theming';\r\nconst BLUR_ANIMATION_DURATION = 180;\r\nconst FOCUS_ANIMATION_DURATION = 150;\r\n/**\r\n * A component to allow users to input text.\r\n *\r\n * <div class=\"screenshots\">\r\n *   <figure>\r\n *     <img class=\"medium\" src=\"screenshots/textinput-flat.focused.png\" />\r\n *     <figcaption>Flat (focused)</figcaption>\r\n *   </figure>\r\n *   <figure>\r\n *     <img class=\"medium\" src=\"screenshots/textinput-flat.disabled.png\" />\r\n *     <figcaption>Flat (disabled)</figcaption>\r\n *   </figure>\r\n *   <figure>\r\n *     <img class=\"medium\" src=\"screenshots/textinput-outlined.focused.png\" />\r\n *     <figcaption>Outlined (focused)</figcaption>\r\n *   </figure>\r\n *   <figure>\r\n *     <img class=\"medium\" src=\"screenshots/textinput-outlined.disabled.png\" />\r\n *     <figcaption>Outlined (disabled)</figcaption>\r\n *   </figure>\r\n * </div>\r\n *\r\n * ## Usage\r\n * ```js\r\n * import * as React from 'react';\r\n * import { TextInput } from '../../';\r\n *\r\n * export default class MyComponent extends React.Component {\r\n *   state = {\r\n *     text: ''\r\n *   };\r\n *\r\n *   render(){\r\n *     return (\r\n *       <TextInput\r\n *         label='Email'\r\n *         value={this.state.text}\r\n *         onChangeText={text => this.setState({ text })}\r\n *       />\r\n *     );\r\n *   }\r\n * }\r\n * ```\r\n *\r\n * @extends TextInput props https://facebook.github.io/react-native/docs/textinput.html#props\r\n */\r\nlet TextInput = /** @class */ (() => {\r\n    class TextInput extends React.Component {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.state = {\r\n                labeled: new Animated.Value((this.props.value !== undefined\r\n                    ? this.props.value\r\n                    : this.props.defaultValue)\r\n                    ? 0\r\n                    : 1),\r\n                error: new Animated.Value(this.props.error ? 1 : 0),\r\n                focused: false,\r\n                placeholder: '',\r\n                value: this.props.value !== undefined\r\n                    ? this.props.value\r\n                    : this.props.defaultValue,\r\n                labelLayout: {\r\n                    measured: false,\r\n                    width: 0,\r\n                    height: 0,\r\n                },\r\n            };\r\n            this.showPlaceholder = () => {\r\n                if (this.timer) {\r\n                    clearTimeout(this.timer);\r\n                }\r\n                // Set the placeholder in a delay to offset the label animation\r\n                // If we show it immediately, they'll overlap and look ugly\r\n                // @ts-ignore\r\n                this.timer = setTimeout(() => this.setState({\r\n                    placeholder: this.props.placeholder,\r\n                }), 50);\r\n            };\r\n            this.hidePlaceholder = () => this.setState({\r\n                placeholder: '',\r\n            });\r\n            this.showError = () => {\r\n                const { scale } = this.props.theme.animation;\r\n                Animated.timing(this.state.error, {\r\n                    toValue: 1,\r\n                    duration: FOCUS_ANIMATION_DURATION * scale,\r\n                    // To prevent this - https://github.com/callstack/'../../'/issues/941\r\n                    useNativeDriver: Platform.select({\r\n                        ios: false,\r\n                        default: true,\r\n                    }),\r\n                }).start(this.showPlaceholder);\r\n            };\r\n            this.hideError = () => {\r\n                const { scale } = this.props.theme.animation;\r\n                Animated.timing(this.state.error, {\r\n                    toValue: 0,\r\n                    duration: BLUR_ANIMATION_DURATION * scale,\r\n                    // To prevent this - https://github.com/callstack/'../../'/issues/941\r\n                    useNativeDriver: Platform.select({\r\n                        ios: false,\r\n                        default: true,\r\n                    }),\r\n                }).start();\r\n            };\r\n            this.restoreLabel = () => {\r\n                const { scale } = this.props.theme.animation;\r\n                Animated.timing(this.state.labeled, {\r\n                    toValue: 1,\r\n                    duration: FOCUS_ANIMATION_DURATION * scale,\r\n                    // To prevent this - https://github.com/callstack/'../../'/issues/941\r\n                    useNativeDriver: Platform.select({\r\n                        ios: false,\r\n                        default: true,\r\n                    }),\r\n                }).start();\r\n            };\r\n            this.minimizeLabel = () => {\r\n                const { scale } = this.props.theme.animation;\r\n                Animated.timing(this.state.labeled, {\r\n                    toValue: 0,\r\n                    duration: BLUR_ANIMATION_DURATION * scale,\r\n                    // To prevent this - https://github.com/callstack/'../../'/issues/941\r\n                    useNativeDriver: Platform.select({\r\n                        ios: false,\r\n                        default: true,\r\n                    }),\r\n                }).start();\r\n            };\r\n            this.handleFocus = (args) => {\r\n                if (this.props.disabled || !this.props.editable) {\r\n                    return;\r\n                }\r\n                this.setState({ focused: true });\r\n                if (this.props.onFocus) {\r\n                    this.props.onFocus(args);\r\n                }\r\n            };\r\n            this.handleBlur = (args) => {\r\n                if (this.props.disabled || !this.props.editable) {\r\n                    return;\r\n                }\r\n                this.setState({ focused: false });\r\n                if (this.props.onBlur) {\r\n                    this.props.onBlur(args);\r\n                }\r\n            };\r\n            this.handleChangeText = (value) => {\r\n                if (!this.props.editable) {\r\n                    return;\r\n                }\r\n                this.setState({ value });\r\n                this.props.onChangeText && this.props.onChangeText(value);\r\n            };\r\n            this.handleLayoutAnimatedText = (e) => {\r\n                this.setState({\r\n                    labelLayout: {\r\n                        width: e.nativeEvent.layout.width,\r\n                        height: e.nativeEvent.layout.height,\r\n                        measured: true,\r\n                    },\r\n                });\r\n            };\r\n        }\r\n        static getDerivedStateFromProps(nextProps, prevState) {\r\n            return {\r\n                value: typeof nextProps.value !== 'undefined'\r\n                    ? nextProps.value\r\n                    : prevState.value,\r\n            };\r\n        }\r\n        componentDidUpdate(prevProps, prevState) {\r\n            if (prevState.focused !== this.state.focused ||\r\n                prevState.value !== this.state.value ||\r\n                // workaround for animated regression for react native > 0.61\r\n                // https://github.com/callstack/'../../'/pull/1440\r\n                prevState.labelLayout !== this.state.labelLayout) {\r\n                // The label should be minimized if the text input is focused, or has text\r\n                // In minimized mode, the label moves up and becomes small\r\n                if (this.state.value || this.state.focused) {\r\n                    this.minimizeLabel();\r\n                }\r\n                else {\r\n                    this.restoreLabel();\r\n                }\r\n            }\r\n            if (prevState.focused !== this.state.focused ||\r\n                prevProps.label !== this.props.label) {\r\n                // Show placeholder text only if the input is focused, or there's no label\r\n                // We don't show placeholder if there's a label because the label acts as placeholder\r\n                // When focused, the label moves up, so we can show a placeholder\r\n                if (this.state.focused || !this.props.label) {\r\n                    this.showPlaceholder();\r\n                }\r\n                else {\r\n                    this.hidePlaceholder();\r\n                }\r\n            }\r\n            if (prevProps.error !== this.props.error) {\r\n                // When the input has an error, we wiggle the label and apply error styles\r\n                if (this.props.error) {\r\n                    this.showError();\r\n                }\r\n                else {\r\n                    this.hideError();\r\n                }\r\n            }\r\n        }\r\n        componentWillUnmount() {\r\n            if (this.timer) {\r\n                clearTimeout(this.timer);\r\n            }\r\n        }\r\n        /**\r\n         * @internal\r\n         */\r\n        setNativeProps(args) {\r\n            return this.root && this.root.setNativeProps(args);\r\n        }\r\n        /**\r\n         * Returns `true` if the input is currently focused, `false` otherwise.\r\n         */\r\n        isFocused() {\r\n            return this.root && this.root.isFocused();\r\n        }\r\n        /**\r\n         * Removes all text from the TextInput.\r\n         */\r\n        clear() {\r\n            return this.root && this.root.clear();\r\n        }\r\n        /**\r\n         * Focuses the input.\r\n         */\r\n        focus() {\r\n            return this.root && this.root.focus();\r\n        }\r\n        /**\r\n         * Removes focus from the input.\r\n         */\r\n        blur() {\r\n            return this.root && this.root.blur();\r\n        }\r\n        render() {\r\n            const { mode, ...rest } = this.props;\r\n            return mode === 'outlined' ? (<TextInputOutlined {...rest} value={this.state.value} parentState={this.state} innerRef={ref => {\r\n                this.root = ref;\r\n            }} onFocus={this.handleFocus} onBlur={this.handleBlur} onChangeText={this.handleChangeText} onLayoutAnimatedText={this.handleLayoutAnimatedText}/>) : (<TextInputFlat {...rest} value={this.state.value} parentState={this.state} innerRef={ref => {\r\n                this.root = ref;\r\n            }} onFocus={this.handleFocus} onBlur={this.handleBlur} onChangeText={this.handleChangeText} onLayoutAnimatedText={this.handleLayoutAnimatedText}/>);\r\n        }\r\n    }\r\n    TextInput.defaultProps = {\r\n        mode: 'flat',\r\n        dense: false,\r\n        disabled: false,\r\n        error: false,\r\n        multiline: false,\r\n        editable: true,\r\n        render: (props) => <NativeTextInput {...props}/>,\r\n    };\r\n    return TextInput;\r\n})();\r\nexport default withTheme(TextInput);\r\n"],"file":"TextInput.js"}