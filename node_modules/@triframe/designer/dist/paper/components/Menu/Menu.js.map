{"version":3,"sources":["../../../../src/paper/components/Menu/Menu.js"],"names":["SCREEN_INDENT","ANIMATION_DURATION","EASING","Easing","bezier","Menu","arguments","state","rendered","props","visible","top","left","menuLayout","width","height","anchorLayout","opacityAnimation","Animated","Value","scaleAnimation","ValueXY","x","y","anchor","menu","isAnchorCoord","React","isValidElement","measureMenuLayout","Promise","resolve","measureInWindow","measureAnchorLayout","updateVisibility","show","hide","isBrowser","Platform","OS","global","focusFirstDOMNode","el","node","focusableNode","querySelector","focus","handleDismiss","onDismiss","handleKeypress","e","key","attachListeners","BackHandler","addEventListener","Dimensions","document","removeListeners","removeEventListener","windowLayout","get","all","requestAnimationFrame","setState","animation","theme","parallel","timing","toValue","duration","scale","easing","useNativeDriver","start","finished","setValue","prevProps","contentStyle","style","children","statusBarHeight","additionalVerticalValue","select","android","default","scaleTransforms","scaleX","interpolate","inputRange","outputRange","scaleY","positionTransforms","push","translateX","right","scrollableMenuHeight","translateY","bottom","shadowMenuContainerStyle","opacity","transform","borderRadius","roundness","positionStyle","I18nManager","isRTL","ref","StyleSheet","absoluteFill","styles","wrapper","shadowMenuContainer","nextProps","prevState","Component","Item","MenuItem","defaultProps","APPROX_STATUSBAR_HEIGHT","create","position","paddingVertical","elevation"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { Platform, StyleSheet, Animated, BackHandler, Dimensions, Easing, I18nManager, TouchableWithoutFeedback, View, ScrollView, findNodeHandle, } from 'react-native';\r\nimport { withTheme } from '../../core/theming';\r\nimport Portal from '../Portal/Portal';\r\nimport Surface from '../Surface';\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nimport MenuItem from './MenuItem';\r\nimport { APPROX_STATUSBAR_HEIGHT } from '../../constants';\r\n// Minimum padding between the edge of the screen and the menu\r\nconst SCREEN_INDENT = 8;\r\n// From https://material.io/design/motion/speed.html#duration\r\nconst ANIMATION_DURATION = 250;\r\n// From the 'Standard easing' section of https://material.io/design/motion/speed.html#easing\r\nconst EASING = Easing.bezier(0.4, 0, 0.2, 1);\r\n/**\r\n * Menus display a list of choices on temporary elevated surfaces. Their placement varies based on the element that opens them.\r\n *\r\n *  <div class=\"screenshots\">\r\n *   <img class=\"medium\" src=\"screenshots/menu-1.png\" />\r\n *   <img class=\"medium\" src=\"screenshots/menu-2.png\" />\r\n * </div>\r\n *\r\n * ## Usage\r\n * ```js\r\n * import * as React from 'react';\r\n * import { View } from 'react-native';\r\n * import { Button, Paragraph, Menu, Divider, Provider } from '../../';\r\n *\r\n * export default class MyComponent extends React.Component {\r\n *   state = {\r\n *     visible: false,\r\n *   };\r\n *\r\n *   _openMenu = () => this.setState({ visible: true });\r\n *\r\n *   _closeMenu = () => this.setState({ visible: false });\r\n *\r\n *   render() {\r\n *     return (\r\n *       <Provider>\r\n *         <View\r\n *           style={{\r\n *             paddingTop: 50,\r\n *             flexDirection: 'row',\r\n *             justifyContent: 'center'\r\n *           }}>\r\n *           <Menu\r\n *             visible={this.state.visible}\r\n *             onDismiss={this._closeMenu}\r\n *             anchor={\r\n *               <Button onPress={this._openMenu}>Show menu</Button>\r\n *             }\r\n *           >\r\n *             <Menu.Item onPress={() => {}} title=\"Item 1\" />\r\n *             <Menu.Item onPress={() => {}} title=\"Item 2\" />\r\n *             <Divider />\r\n *             <Menu.Item onPress={() => {}} title=\"Item 3\" />\r\n *           </Menu>\r\n *         </View>\r\n *       </Provider>\r\n *     );\r\n *   }\r\n * }\r\n * ```\r\n */\r\nlet Menu = /** @class */ (() => {\r\n    class Menu extends React.Component {\r\n        constructor() {\r\n            super(...arguments);\r\n            this.state = {\r\n                rendered: this.props.visible,\r\n                top: 0,\r\n                left: 0,\r\n                menuLayout: { width: 0, height: 0 },\r\n                anchorLayout: { width: 0, height: 0 },\r\n                opacityAnimation: new Animated.Value(0),\r\n                scaleAnimation: new Animated.ValueXY({ x: 0, y: 0 }),\r\n            };\r\n            this.anchor = null;\r\n            this.menu = null;\r\n            this.isAnchorCoord = () => !React.isValidElement(this.props.anchor);\r\n            this.measureMenuLayout = () => new Promise(resolve => {\r\n                if (this.menu) {\r\n                    this.menu.measureInWindow((x, y, width, height) => {\r\n                        resolve({ x, y, width, height });\r\n                    });\r\n                }\r\n            });\r\n            this.measureAnchorLayout = () => new Promise(resolve => {\r\n                const { anchor } = this.props;\r\n                if (this.isAnchorCoord()) {\r\n                    // @ts-ignore\r\n                    resolve({ x: anchor.x, y: anchor.y, width: 0, height: 0 });\r\n                    return;\r\n                }\r\n                if (this.anchor) {\r\n                    this.anchor.measureInWindow((x, y, width, height) => {\r\n                        resolve({ x, y, width, height });\r\n                    });\r\n                }\r\n            });\r\n            this.updateVisibility = async () => {\r\n                // Menu is rendered in Portal, which updates items asynchronously\r\n                // We need to do the same here so that the ref is up-to-date\r\n                await Promise.resolve();\r\n                if (this.props.visible) {\r\n                    this.show();\r\n                }\r\n                else {\r\n                    this.hide();\r\n                }\r\n            };\r\n            this.isBrowser = () => Platform.OS === 'web' && 'document' in global;\r\n            this.focusFirstDOMNode = (el) => {\r\n                if (el && this.isBrowser()) {\r\n                    // When in the browser, we want to focus the first focusable item on toggle\r\n                    // For example, when menu is shown, focus the first item in the menu\r\n                    // And when menu is dismissed, send focus back to the button to resume tabbing\r\n                    const node = findNodeHandle(el);\r\n                    const focusableNode = node.querySelector(\r\n                    // This is a rough list of selectors that can be focused\r\n                    'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\r\n                    focusableNode?.focus();\r\n                }\r\n            };\r\n            this.handleDismiss = () => {\r\n                if (this.props.visible) {\r\n                    this.props.onDismiss();\r\n                }\r\n                return true;\r\n            };\r\n            this.handleKeypress = (e) => {\r\n                if (e.key === 'Escape') {\r\n                    this.props.onDismiss();\r\n                }\r\n            };\r\n            this.attachListeners = () => {\r\n                BackHandler.addEventListener('hardwareBackPress', this.handleDismiss);\r\n                Dimensions.addEventListener('change', this.handleDismiss);\r\n                this.isBrowser() && document.addEventListener('keyup', this.handleKeypress);\r\n            };\r\n            this.removeListeners = () => {\r\n                BackHandler.removeEventListener('hardwareBackPress', this.handleDismiss);\r\n                Dimensions.removeEventListener('change', this.handleDismiss);\r\n                this.isBrowser() &&\r\n                    document.removeEventListener('keyup', this.handleKeypress);\r\n            };\r\n            this.show = async () => {\r\n                const windowLayout = Dimensions.get('window');\r\n                const [menuLayout, anchorLayout] = await Promise.all([\r\n                    this.measureMenuLayout(),\r\n                    this.measureAnchorLayout(),\r\n                ]);\r\n                // When visible is true for first render\r\n                // native views can be still not rendered and\r\n                // measureMenuLayout/measureAnchorLayout functions\r\n                // return wrong values e.g { x:0, y: 0, width: 0, height: 0 }\r\n                // so we have to wait until views are ready\r\n                // and rerun this function to show menu\r\n                if (!windowLayout.width ||\r\n                    !windowLayout.height ||\r\n                    !menuLayout.width ||\r\n                    !menuLayout.height ||\r\n                    (!anchorLayout.width && !this.isAnchorCoord()) ||\r\n                    (!anchorLayout.height && !this.isAnchorCoord())) {\r\n                    requestAnimationFrame(this.show);\r\n                    return;\r\n                }\r\n                this.setState(() => ({\r\n                    left: anchorLayout.x,\r\n                    top: anchorLayout.y,\r\n                    anchorLayout: {\r\n                        height: anchorLayout.height,\r\n                        width: anchorLayout.width,\r\n                    },\r\n                    menuLayout: {\r\n                        width: menuLayout.width,\r\n                        height: menuLayout.height,\r\n                    },\r\n                }), () => {\r\n                    this.attachListeners();\r\n                    const { animation } = this.props.theme;\r\n                    Animated.parallel([\r\n                        Animated.timing(this.state.scaleAnimation, {\r\n                            toValue: { x: menuLayout.width, y: menuLayout.height },\r\n                            duration: ANIMATION_DURATION * animation.scale,\r\n                            easing: EASING,\r\n                            useNativeDriver: true,\r\n                        }),\r\n                        Animated.timing(this.state.opacityAnimation, {\r\n                            toValue: 1,\r\n                            duration: ANIMATION_DURATION * animation.scale,\r\n                            easing: EASING,\r\n                            useNativeDriver: true,\r\n                        }),\r\n                    ]).start(({ finished }) => {\r\n                        if (finished) {\r\n                            this.focusFirstDOMNode(this.menu);\r\n                        }\r\n                    });\r\n                });\r\n            };\r\n            this.hide = () => {\r\n                this.removeListeners();\r\n                const { animation } = this.props.theme;\r\n                Animated.timing(this.state.opacityAnimation, {\r\n                    toValue: 0,\r\n                    duration: ANIMATION_DURATION * animation.scale,\r\n                    easing: EASING,\r\n                    useNativeDriver: true,\r\n                }).start(finished => {\r\n                    if (finished) {\r\n                        this.setState({ menuLayout: { width: 0, height: 0 }, rendered: false });\r\n                        this.state.scaleAnimation.setValue({ x: 0, y: 0 });\r\n                        this.focusFirstDOMNode(this.anchor);\r\n                    }\r\n                });\r\n            };\r\n        }\r\n        static getDerivedStateFromProps(nextProps, prevState) {\r\n            if (nextProps.visible && !prevState.rendered) {\r\n                return { rendered: true };\r\n            }\r\n            return null;\r\n        }\r\n        componentDidUpdate(prevProps) {\r\n            if (prevProps.visible !== this.props.visible) {\r\n                this.updateVisibility();\r\n            }\r\n        }\r\n        componentWillUnmount() {\r\n            this.removeListeners();\r\n        }\r\n        render() {\r\n            const { visible, anchor, contentStyle, style, children, theme, statusBarHeight, onDismiss, } = this.props;\r\n            const { rendered, menuLayout, anchorLayout, opacityAnimation, scaleAnimation, } = this.state;\r\n            let { left, top } = this.state;\r\n            // I don't know why but on Android measure function is wrong by 24\r\n            const additionalVerticalValue = Platform.select({\r\n                android: statusBarHeight,\r\n                default: 0,\r\n            });\r\n            const scaleTransforms = [\r\n                {\r\n                    scaleX: scaleAnimation.x.interpolate({\r\n                        inputRange: [0, menuLayout.width],\r\n                        outputRange: [0, 1],\r\n                    }),\r\n                },\r\n                {\r\n                    scaleY: scaleAnimation.y.interpolate({\r\n                        inputRange: [0, menuLayout.height],\r\n                        outputRange: [0, 1],\r\n                    }),\r\n                },\r\n            ];\r\n            const windowLayout = Dimensions.get('window');\r\n            // We need to translate menu while animating scale to imitate transform origin for scale animation\r\n            const positionTransforms = [];\r\n            // Check if menu fits horizontally and if not align it to right.\r\n            if (left <= windowLayout.width - menuLayout.width - SCREEN_INDENT) {\r\n                positionTransforms.push({\r\n                    translateX: scaleAnimation.x.interpolate({\r\n                        inputRange: [0, menuLayout.width],\r\n                        outputRange: [-(menuLayout.width / 2), 0],\r\n                    }),\r\n                });\r\n                // Check if menu position has enough space from left side\r\n                if (left < SCREEN_INDENT) {\r\n                    left = SCREEN_INDENT;\r\n                }\r\n            }\r\n            else {\r\n                positionTransforms.push({\r\n                    translateX: scaleAnimation.x.interpolate({\r\n                        inputRange: [0, menuLayout.width],\r\n                        outputRange: [menuLayout.width / 2, 0],\r\n                    }),\r\n                });\r\n                left += anchorLayout.width - menuLayout.width;\r\n                const right = left + menuLayout.width;\r\n                // Check if menu position has enough space from right side\r\n                if (right > windowLayout.width - SCREEN_INDENT) {\r\n                    left = windowLayout.width - SCREEN_INDENT - menuLayout.width;\r\n                }\r\n            }\r\n            // If the menu is larger than available vertical space,\r\n            // calculate the height of scrollable view\r\n            let scrollableMenuHeight = 0;\r\n            // Check if the menu should be scrollable\r\n            if (\r\n            // Check if the menu overflows from bottom side\r\n            top >=\r\n                windowLayout.height -\r\n                    menuLayout.height -\r\n                    SCREEN_INDENT -\r\n                    additionalVerticalValue &&\r\n                // And bottom side of the screen has more space than top side\r\n                top <= windowLayout.height - top) {\r\n                // Scrollable menu should be below the anchor (expands downwards)\r\n                scrollableMenuHeight =\r\n                    windowLayout.height - top - SCREEN_INDENT - additionalVerticalValue;\r\n            }\r\n            else if (\r\n            // Check if the menu overflows from bottom side\r\n            top >=\r\n                windowLayout.height -\r\n                    menuLayout.height -\r\n                    SCREEN_INDENT -\r\n                    additionalVerticalValue &&\r\n                // And top side of the screen has more space than bottom side\r\n                top >= windowLayout.height - top &&\r\n                // And menu overflows from top side\r\n                top <=\r\n                    menuLayout.height -\r\n                        anchorLayout.height +\r\n                        SCREEN_INDENT -\r\n                        additionalVerticalValue) {\r\n                // Scrollable menu should be above the anchor (expands upwards)\r\n                scrollableMenuHeight =\r\n                    top + anchorLayout.height - SCREEN_INDENT + additionalVerticalValue;\r\n            }\r\n            // Scrollable menu max height\r\n            scrollableMenuHeight =\r\n                scrollableMenuHeight > windowLayout.height - 2 * SCREEN_INDENT\r\n                    ? windowLayout.height - 2 * SCREEN_INDENT\r\n                    : scrollableMenuHeight;\r\n            // Menu is typically positioned below the element that generates it\r\n            // So first check if it fits below the anchor (expands downwards)\r\n            if (\r\n            // Check if menu fits vertically\r\n            top <=\r\n                windowLayout.height -\r\n                    menuLayout.height -\r\n                    SCREEN_INDENT -\r\n                    additionalVerticalValue ||\r\n                // Or if the menu overflows from bottom side\r\n                (top >=\r\n                    windowLayout.height -\r\n                        menuLayout.height -\r\n                        SCREEN_INDENT -\r\n                        additionalVerticalValue &&\r\n                    // And bottom side of the screen has more space than top side\r\n                    top <= windowLayout.height - top)) {\r\n                positionTransforms.push({\r\n                    translateY: scaleAnimation.y.interpolate({\r\n                        inputRange: [0, menuLayout.height],\r\n                        outputRange: [-((scrollableMenuHeight || menuLayout.height) / 2), 0],\r\n                    }),\r\n                });\r\n                // Check if menu position has enough space from top side\r\n                if (top < SCREEN_INDENT) {\r\n                    top = SCREEN_INDENT;\r\n                }\r\n            }\r\n            else {\r\n                positionTransforms.push({\r\n                    translateY: scaleAnimation.y.interpolate({\r\n                        inputRange: [0, menuLayout.height],\r\n                        outputRange: [(scrollableMenuHeight || menuLayout.height) / 2, 0],\r\n                    }),\r\n                });\r\n                top += anchorLayout.height - (scrollableMenuHeight || menuLayout.height);\r\n                const bottom = top +\r\n                    (scrollableMenuHeight || menuLayout.height) +\r\n                    additionalVerticalValue;\r\n                // Check if menu position has enough space from bottom side\r\n                if (bottom > windowLayout.height - SCREEN_INDENT) {\r\n                    top =\r\n                        scrollableMenuHeight === windowLayout.height - 2 * SCREEN_INDENT\r\n                            ? -SCREEN_INDENT * 2\r\n                            : windowLayout.height -\r\n                                menuLayout.height -\r\n                                SCREEN_INDENT -\r\n                                additionalVerticalValue;\r\n                }\r\n            }\r\n            const shadowMenuContainerStyle = {\r\n                opacity: opacityAnimation,\r\n                transform: scaleTransforms,\r\n                borderRadius: theme.roundness,\r\n                ...(scrollableMenuHeight ? { height: scrollableMenuHeight } : {}),\r\n            };\r\n            const positionStyle = {\r\n                top: this.isAnchorCoord() ? top : top + additionalVerticalValue,\r\n                ...(I18nManager.isRTL ? { right: left } : { left }),\r\n            };\r\n            return (<View ref={ref => {\r\n                this.anchor = ref;\r\n            }} collapsable={false}>\r\n        {this.isAnchorCoord() ? null : anchor}\r\n        {rendered ? (<Portal>\r\n            <TouchableWithoutFeedback onPress={onDismiss}>\r\n              <View style={StyleSheet.absoluteFill}/>\r\n            </TouchableWithoutFeedback>\r\n            <View ref={ref => {\r\n                this.menu = ref;\r\n            }} collapsable={false} accessibilityViewIsModal={visible} style={[styles.wrapper, positionStyle, style]} pointerEvents={visible ? 'box-none' : 'none'}>\r\n              <Animated.View style={{ transform: positionTransforms }}>\r\n                <Surface style={[\r\n                styles.shadowMenuContainer,\r\n                shadowMenuContainerStyle,\r\n                contentStyle,\r\n            ]}>\r\n                  {(scrollableMenuHeight && (<ScrollView>{children}</ScrollView>)) || <React.Fragment>{children}</React.Fragment>}\r\n                </Surface>\r\n              </Animated.View>\r\n            </View>\r\n          </Portal>) : null}\r\n      </View>);\r\n        }\r\n    }\r\n    // @component ./MenuItem.tsx\r\n    Menu.Item = MenuItem;\r\n    Menu.defaultProps = {\r\n        statusBarHeight: APPROX_STATUSBAR_HEIGHT,\r\n    };\r\n    return Menu;\r\n})();\r\nconst styles = StyleSheet.create({\r\n    wrapper: {\r\n        position: 'absolute',\r\n    },\r\n    shadowMenuContainer: {\r\n        opacity: 0,\r\n        paddingVertical: 8,\r\n        elevation: 8,\r\n    },\r\n});\r\nexport default withTheme(Menu);\r\n"],"file":"Menu.js"}