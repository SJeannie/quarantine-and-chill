{"version":3,"sources":["../../../src/paper/components/Banner.js"],"names":["ELEVATION","DEFAULT_MAX_WIDTH","Banner","arguments","state","position","Animated","Value","props","visible","layout","height","measured","handleLayout","nativeEvent","setState","toggle","show","hide","scale","theme","animation","timing","duration","toValue","useNativeDriver","start","prevProps","icon","children","actions","contentStyle","style","rest","multiply","translateY","add","styles","container","wrapper","absolute","transform","opacity","content","message","map","i","label","others","button","React","Component","StyleSheet","create","elevation","overflow","alignSelf","width","maxWidth","top","flexDirection","justifyContent","marginHorizontal","marginTop","marginBottom","margin","flex"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { View, StyleSheet, Animated } from 'react-native';\r\nimport Surface from './Surface';\r\nimport Text from './Typography/Text';\r\nimport Button from './Button';\r\nimport Icon from './Icon';\r\nimport { withTheme } from '../core/theming';\r\nimport shadow from '../styles/shadow';\r\nconst ELEVATION = 1;\r\nconst DEFAULT_MAX_WIDTH = 960;\r\n/**\r\n * Banner displays a prominent message and related actions.\r\n *\r\n * <div class=\"screenshots\">\r\n *   <img class=\"medium\" src=\"screenshots/banner.gif\" />\r\n * </div>\r\n *\r\n * ## Usage\r\n * ```js\r\n * import * as React from 'react';\r\n * import { Image } from 'react-native';\r\n * import { Banner } from '../';\r\n *\r\n * export default class MyComponent extends React.Component {\r\n *   state = {\r\n *     visible: true,\r\n *   };\r\n *\r\n *   render() {\r\n *     return (\r\n *       <Banner\r\n *         visible={this.state.visible}\r\n *         actions={[\r\n *           {\r\n *             label: 'Fix it',\r\n *             onPress: () => this.setState({ visible: false }),\r\n *           },\r\n *           {\r\n *             label: 'Learn more',\r\n *             onPress: () => this.setState({ visible: false }),\r\n *           },\r\n *         ]}\r\n *         icon={({ size }) =>\r\n *           <Image\r\n *             source={{ uri: 'https://avatars3.githubusercontent.com/u/17571969?s=400&v=4' }}\r\n *             style={{\r\n *               width: size,\r\n *               height: size,\r\n *             }}\r\n *           />\r\n *         }\r\n *       >\r\n *         There was a problem processing a transaction on your credit card.\r\n *       </Banner>\r\n *     );\r\n *   }\r\n * }\r\n * ```\r\n */\r\nclass Banner extends React.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            position: new Animated.Value(this.props.visible ? 1 : 0),\r\n            layout: {\r\n                height: 0,\r\n                measured: false,\r\n            },\r\n        };\r\n        this.handleLayout = ({ nativeEvent }) => {\r\n            const { height } = nativeEvent.layout;\r\n            this.setState({ layout: { height, measured: true } });\r\n        };\r\n        this.toggle = () => {\r\n            if (this.props.visible) {\r\n                this.show();\r\n            }\r\n            else {\r\n                this.hide();\r\n            }\r\n        };\r\n        this.show = () => {\r\n            const { scale } = this.props.theme.animation;\r\n            Animated.timing(this.state.position, {\r\n                duration: 250 * scale,\r\n                toValue: 1,\r\n                useNativeDriver: false,\r\n            }).start();\r\n        };\r\n        this.hide = () => {\r\n            const { scale } = this.props.theme.animation;\r\n            Animated.timing(this.state.position, {\r\n                duration: 200 * scale,\r\n                toValue: 0,\r\n                useNativeDriver: false,\r\n            }).start();\r\n        };\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.visible !== this.props.visible) {\r\n            this.toggle();\r\n        }\r\n    }\r\n    render() {\r\n        const { visible, icon, children, actions, contentStyle, style, \r\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n        theme, ...rest } = this.props;\r\n        const { position, layout } = this.state;\r\n        // The banner animation has 2 parts:\r\n        // 1. Blank spacer element which animates its height to move the content\r\n        // 2. Actual banner which animates its translateY\r\n        // In initial render, we position everything normally and measure the height of the banner\r\n        // Once we have the height, we apply the height to the spacer and switch the banner to position: absolute\r\n        // We need this because we need to move the content below as if banner's height was being animated\r\n        // However we can't animated banner's height directly as it'll also resize the content inside\r\n        const height = Animated.multiply(position, layout.height);\r\n        const translateY = Animated.multiply(Animated.add(position, -1), layout.height);\r\n        return (<Surface {...rest} style={[styles.container, shadow(ELEVATION), style]}>\r\n        <View style={[styles.wrapper, contentStyle]}>\r\n          <Animated.View style={{ height }}/>\r\n          <Animated.View onLayout={this.handleLayout} style={[\r\n            layout.measured || !visible\r\n                ? // If we have measured banner's height or it's invisible,\r\n                    // Position it absolutely, the layout will be taken care of the spacer\r\n                    [styles.absolute, { transform: [{ translateY }] }]\r\n                : // Otherwise position it normally\r\n                    null,\r\n            !layout.measured && !visible\r\n                ? // If we haven't measured banner's height yet and it's invisible,\r\n                    // hide it with opacity: 0 so user doesn't see it\r\n                    { opacity: 0 }\r\n                : null,\r\n        ]}>\r\n            <View style={styles.content}>\r\n              {icon ? (<View style={styles.icon}>\r\n                  \r\n                  <Icon source={icon} size={40}/>\r\n                </View>) : null}\r\n              <Text style={styles.message}>{children}</Text>\r\n            </View>\r\n            <View style={styles.actions}>\r\n              {actions.map(({ label, ...others }, i) => (<Button key={i} compact mode=\"text\" style={styles.button} {...others}>\r\n                  {label}\r\n                </Button>))}\r\n            </View>\r\n          </Animated.View>\r\n        </View>\r\n      </Surface>);\r\n    }\r\n}\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        elevation: ELEVATION,\r\n    },\r\n    wrapper: {\r\n        overflow: 'hidden',\r\n        alignSelf: 'center',\r\n        width: '100%',\r\n        maxWidth: DEFAULT_MAX_WIDTH,\r\n    },\r\n    absolute: {\r\n        position: 'absolute',\r\n        top: 0,\r\n        width: '100%',\r\n    },\r\n    content: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-start',\r\n        marginHorizontal: 8,\r\n        marginTop: 16,\r\n        marginBottom: 0,\r\n    },\r\n    icon: {\r\n        margin: 8,\r\n    },\r\n    message: {\r\n        flex: 1,\r\n        margin: 8,\r\n    },\r\n    actions: {\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        margin: 4,\r\n    },\r\n    button: {\r\n        margin: 4,\r\n    },\r\n});\r\nexport default withTheme(Banner);\r\n"],"file":"Banner.js"}