var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.FileInput=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _react=_interopRequireWildcard(require("react"));var _Button=require("../Button");var _paper=require("../paper");var _arbiterReact=require("@triframe/arbiter-react");var _reactNative=require("react-native");var _this=this,_jsxFileName="C:\\Users\\Joshua\\My Documents\\development\\triframe\\packages\\designer\\src\\FileInput\\index.web.js";var FileInput=function FileInput(_ref){var _ref$onChange=_ref.onChange,onChange=_ref$onChange===void 0?function(){return void 0;}:_ref$onChange,_ref$multiple=_ref.multiple,multiple=_ref$multiple===void 0?false:_ref$multiple,_ref$path=_ref.path,path=_ref$path===void 0?false:_ref$path,_ref$children=_ref.children,children=_ref$children===void 0?'Upload':_ref$children,props=(0,_objectWithoutProperties2.default)(_ref,["onChange","multiple","path","children"]);var _useState=(0,_react.useState)(''),_useState2=(0,_slicedToArray2.default)(_useState,2),filenames=_useState2[0],changeFilenames=_useState2[1];var handleChange=function handleChange(e,url){var names=[];var input=e.target;var form=new FormData();for(var index=0;index<input.files.length;index++){var file=input.files[index];names.push(file.name);form.append(index,file);}changeFilenames(names.join(', '));form.append('length',input.files.length);form.append('path',path);fetch(url+"/upload",{method:'POST',body:form}).then(function(res){return res.json();}).then(function(urls){onChange(multiple?urls:urls[0]);});};var input;var chooseFile=function chooseFile(){return input.click();};return _react.default.createElement(_arbiterReact.Model.Consumer,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:34,columnNumber:9}},function(models){return _react.default.createElement(_reactNative.View,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:36,columnNumber:17}},_react.default.createElement(_Button.Button,(0,_extends2.default)({onPress:chooseFile},props,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:37,columnNumber:21}}),children),_react.default.createElement(_paper.HelperText,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:38,columnNumber:21}},filenames),_react.default.createElement("input",{style:{display:'none'},ref:function ref(x){return input=x;},type:"file",multiple:multiple,onChange:function onChange(e){return handleChange(e,models.url);},__self:_this,__source:{fileName:_jsxFileName,lineNumber:39,columnNumber:21}}));});};exports.FileInput=FileInput;
//# sourceMappingURL=index.web.js.map