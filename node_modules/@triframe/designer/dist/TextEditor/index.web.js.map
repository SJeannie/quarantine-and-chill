{"version":3,"sources":["../../src/TextEditor/index.web.js"],"names":["Cursor","visibility","setVisibility","interval","setInterval","clearInterval","borderRightStyle","borderRightColor","borderRightWidth","handleKeyPress","document","addEventListener","e","pressed","focused","target","dataset","editor","setSelection","start","end","selection","key","backspace","insert","whiteSpace","userSelect","fontSize","content","map","index","characters","symbol","position","styles","id","next","latterHalfClick","undefined","length","width","window","innerWidth","height","getBoundingClientRect","x","clientX","type","time","sleep","Promise","resolve","setTimeout","phrase","cont","i","keyboardEvent","Event","dispatchEvent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Button, TextInput, Card, TextField, Title, Container, Grid, Column, Text, Chip } from '..';\r\n\r\nconst Cursor = () => {\r\n    let [visibility, setVisibility] = useState('visible')\r\n\r\n    useEffect(() => {\r\n        let interval = setInterval(() => {\r\n            visibility = visibility == 'hidden' ? 'visible' : 'hidden'\r\n            setVisibility(visibility)\r\n        }, 500)\r\n        return () => clearInterval(interval)\r\n    }, [])\r\n\r\n    return (\r\n        <span style={{ visibility, borderRightStyle: 'solid', borderRightColor: 'black', borderRightWidth: '1px' }}></span>\r\n    )\r\n}\r\n\r\n\r\nlet handleKeyPress = () => void (0)\r\n\r\ndocument.addEventListener('keydown', e => {\r\n    handleKeyPress(e)\r\n})\r\n\r\nlet pressed = false;\r\nlet focused = true;\r\n\r\ndocument.addEventListener('mousedown', () => {\r\n    pressed = true\r\n})\r\n\r\ndocument.addEventListener('mouseup', () => {\r\n    pressed = false\r\n})\r\n\r\ndocument.addEventListener('click', (e) => {\r\n    if(!e.target.dataset.editor){\r\n        focused = false\r\n    }\r\n})\r\n\r\nexport default ({ document }) => {\r\n\r\n    const setSelection = (start, end) => {\r\n        focused = true\r\n        document.setSelection({ start, end })\r\n    }\r\n\r\n    let selection = document.selection\r\n\r\n    handleKeyPress = (e) => {\r\n        if (!focused) return false\r\n        switch (e.key) {\r\n            case 'Backspace':\r\n                document.backspace()\r\n                break;\r\n            case 'Enter':\r\n                document.insert(\"\\n\")\r\n                break;\r\n            case 'Control':\r\n                break;\r\n            case 'Shift':\r\n                break;\r\n            default:\r\n                document.insert(e.key)\r\n                break;\r\n        }\r\n    }\r\n   \r\n    return (\r\n        <pre style={{ whiteSpace: 'pre-wrap', userSelect: 'none', fontSize: '15px' }} data-editor={true}>\r\n            {document.content.map(({ symbol, position, styles, id }, index, characters) => {\r\n                let next = characters[index + 1] || { position: 'end' }\r\n                return <span\r\n                    data-editor={true}\r\n                    key={id}\r\n                    style={styles}\r\n                    onPointerDown={(e) => setSelection(latterHalfClick(e) ? next.position : position, latterHalfClick(e) ? next.position : position)}\r\n                    onPointerUp={(e) => setSelection(selection.start, latterHalfClick(e) ? next.position : position)}\r\n                    onMouseEnter={e => pressed ? setSelection(selection.start, latterHalfClick(e) ? next.position : position) : undefined}\r\n                >\r\n                    {selection.start === selection.end && selection.start == position\r\n                        ? <Cursor />\r\n                        : null\r\n                    }\r\n                    {symbol}\r\n                    {selection.start === selection.end && selection.start === 'end' && index == characters.length - 1\r\n                        ? <Cursor />\r\n                        : null\r\n                    }\r\n                </span>\r\n            })}\r\n            <div style={{ width: window.innerWidth, height: 200 }}\r\n                onClick={() => setSelection('end', 'end')}\r\n            ></div>\r\n        </pre>\r\n    )\r\n}\r\n\r\n\r\nconst latterHalfClick = e => {\r\n    const { x, width } = e.target.getBoundingClientRect()\r\n    return e.clientX > (x + (width / 2))\r\n}\r\n\r\nwindow.type = function (time) {\r\n    let sleep = time => new Promise(resolve => setTimeout(resolve, time))\r\n    let phrase = [\"T\", \"h\", \"e\", \" \", \"q\", \"u\", \"i\", \"c\", \"k\", \" \", \"b\", \"r\", \"o\", \"w\", \"n\", \" \", \"f\", \"o\", \"x\", \" \", \"j\", \"u\", \"m\", \"p\", \"e\", \"d\", \" \", \"o\", \"v\", \"e\", \"r\", \" \", \"t\", \"h\", \"e\", \" \", \"l\", \"a\", \"z\", \"y\", \" \", \"d\", \"o\", \"g\", \"Enter\"]\r\n    let cont = true\r\n    let i = 0;\r\n    ; (async () => {\r\n        while (cont) {\r\n            var keyboardEvent = new Event('keydown')\r\n            keyboardEvent.key = phrase[i]\r\n            document.dispatchEvent(keyboardEvent);\r\n            await sleep(time)\r\n            i = (i + 1) % phrase.length;\r\n        }\r\n    })()\r\n    return () => cont = false\r\n}"],"file":"index.web.js"}