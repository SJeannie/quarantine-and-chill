{"version":3,"sources":["../../../src/DateTimeInput/__web-components__/calendar.js"],"names":["range","start","end","array","i","push","chunk","size","result","forEach","element","length","oneMonth","Duration","fromObject","months","Day","w","d","className","theme","props","prevMonth","nextMonth","cls","fontFamily","fonts","regular","selectDate","m","moment","minus","plus","set","day","onChange","e","preventDefault","d1","endOf","d2","startOf","weekday","d3","days","concat","weeks","color","fontSize","prevMonthIcon","colors","text","toFormat","nextMonthIcon","map","row","Component"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport cx from 'classnames';\r\nimport { DateTime, Duration } from '@triframe/core'\r\nimport { Icon } from '../../Icon'\r\nimport { withTheme } from '../../paper';\r\n\r\nfunction range(start, end) {\r\n  let array = []\r\n  for (let i = start; i < end; i++) array.push(i)\r\n  return array\r\n}\r\n\r\n\r\nfunction chunk(array, size) {\r\n  let chunk = []\r\n  let result = [chunk]\r\n  array.forEach((element) => {\r\n    chunk.push(element)\r\n    if (chunk.length === size) {\r\n      chunk = []\r\n      result.push(chunk)\r\n    }\r\n  })\r\n  return result\r\n}\r\n\r\nconst oneMonth = Duration.fromObject({ months: 1 })\r\n\r\n\r\nconst Day = withTheme(({ i, w, d, className, theme, ...props }) => {\r\n  const prevMonth = w === 0 && i > 7;\r\n  const nextMonth = w >= 4 && i <= 14;\r\n  const cls = cx({\r\n    'prev-month': prevMonth,\r\n    'next-month': nextMonth,\r\n    'current-day': !prevMonth && !nextMonth && i === d\r\n  });\r\n\r\n  return (\r\n    <td className={cls} {...props}\r\n      style={{\r\n        fontFamily: theme.fonts.regular.fontFamily,\r\n        //color: theme.colors.text,\r\n      }}\r\n    >\r\n      {i}\r\n    </td>\r\n  );\r\n})\r\n\r\nexport default withTheme(class Calendar extends Component {\r\n  selectDate = (i, w) => {\r\n    const prevMonth = w === 0 && i > 7;\r\n    const nextMonth = w >= 4 && i <= 14;\r\n    let m = this.props.moment;\r\n\r\n    if (prevMonth) m = m.minus(oneMonth);\r\n    if (nextMonth) m = m.plus(oneMonth);\r\n\r\n    m = m.set({ day: i });\r\n\r\n    this.props.onChange(m);\r\n  };\r\n\r\n  prevMonth = e => {\r\n    e.preventDefault();\r\n    this.props.onChange(this.props.moment.minus(oneMonth));\r\n  };\r\n\r\n  nextMonth = e => {\r\n    e.preventDefault();\r\n    this.props.onChange(this.props.moment.plus(oneMonth));\r\n  };\r\n\r\n  render() {\r\n    const m = this.props.moment;\r\n    const theme = this.props.theme;\r\n    const d = m.day;\r\n    const d1 = m.minus(oneMonth).endOf('month').day;  //31\r\n    const d2 = m.startOf('month').weekday // TODO: Check this 03\r\n    const d3 = m.endOf('month').day // 30\r\n    const days = [].concat(\r\n      range(d1 - d2 + 1, d1 + 1), // 29-31\r\n      range(1, d3 + 1), // 1-30\r\n      range(1, 42 - d3 - d2 + 1) // 1-09\r\n    );\r\n    const weeks = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n    return (\r\n      <div className={cx('m-calendar', this.props.className)}>\r\n        <div className=\"toolbar\">\r\n          <button type=\"button\" className=\"prev-month\" onClick={this.prevMonth}>\r\n            <Icon style={{ color: 'white', fontSize: 20 }} name={this.props.prevMonthIcon} />\r\n          </button>\r\n          <span className=\"current-date\"\r\n            style={{\r\n              ...theme.fonts.regular,\r\n              color: theme.colors.text,\r\n            }}\r\n          >\r\n            {m.toFormat('MMMM yyyy')}\r\n          </span>\r\n          <button type=\"button\" className=\"next-month\" onClick={this.nextMonth}>\r\n            <Icon style={{ color: 'white', fontSize: 20 }} name={this.props.nextMonthIcon} />\r\n          </button>\r\n        </div>\r\n\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              {weeks.map((w, i) => (\r\n                <td key={i}\r\n                  style={{\r\n                    ...theme.fonts.regular,\r\n                    color: theme.colors.text,\r\n                  }}\r\n                >\r\n                  {w}\r\n                </td>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n\r\n          <tbody>\r\n            {chunk(days, 7).map((row, w) =>\r\n              <tr key={w}>\r\n                {row.map(i =>\r\n                  <Day\r\n                    key={i}\r\n                    i={i}\r\n                    d={d}\r\n                    w={w}\r\n                    onClick={() => this.selectDate(i, w)}\r\n                  />\r\n                )}\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n})\r\n"],"file":"calendar.js"}