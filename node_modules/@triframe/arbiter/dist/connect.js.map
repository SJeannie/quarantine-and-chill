{"version":3,"sources":["../src/connect.js"],"names":["connect","url","storage","window","location","href","Error","Promise","resolve","io","Connection","establish","mountStorage","unserialize","on","apiSchema","api"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;AAEO,MAAMA,OAAO,WAAPA,OAAO,GAAG,CAACC,GAAG,GAAG,GAAP,EAAY;AAAEC,EAAAA,OAAO,GAAG;AAAZ,IAAqB,EAAjC,KAAwC;AAC3D,MAAID,GAAG,KAAK,GAAZ,EAAiB;AACb,QAAI,OAAOE,MAAP,KAAkB,WAAtB,EAAmC;AAC/BF,MAAAA,GAAG,GAAGE,MAAM,CAACC,QAAP,CAAgBC,IAAtB;AACH,KAFD,MAEO;AACH,YAAMC,KAAK,CAAC,6DAAD,CAAX;AACH;AACJ;;AACD,SAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAI;AAC1B,UAAMC,EAAE,GAAGC,uBAAWC,SAAX,CAAqBV,GAArB,CAAX;;AACA,QAAIC,OAAO,KAAK,IAAhB,EAAsBO,EAAE,CAACG,YAAH,CAAgBV,OAAhB;AACtB,UAAMW,WAAW,GAAG,sCAAmBJ,EAAnB,CAApB;AACAA,IAAAA,EAAE,CAACK,EAAH,CAAM,SAAN,EAAkBC,SAAD,IAAe;AAC5B,YAAMC,GAAG,GAAGH,WAAW,CAACE,SAAD,CAAvB;AACAP,MAAAA,OAAO,iCAAMQ,GAAN;AAAWf,QAAAA;AAAX,SAAP;AACH,KAHD;AAIH,GARM,CAAP;AASH,CAjBM","sourcesContent":["import { Connection } from './Connection'\r\nimport { createUnserializer } from './unserializer'\r\n\r\nexport const connect = (url = \"/\", { storage = null } = {}) => {\r\n    if (url === \"/\") {\r\n        if (typeof window !== 'undefined') {\r\n            url = window.location.href;\r\n        } else {\r\n            throw Error('No valid URL provided to connect in Non-Browser Environment')\r\n        }\r\n    }\r\n    return new Promise(resolve => {\r\n        const io = Connection.establish(url)\r\n        if (storage !== null) io.mountStorage(storage)\r\n        const unserialize = createUnserializer(io)\r\n        io.on('install', (apiSchema) => {\r\n            const api = unserialize(apiSchema)\r\n            resolve({ ...api, url })\r\n        })\r\n    })\r\n}"],"file":"connect.js"}