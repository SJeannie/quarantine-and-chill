{"version":3,"sources":["../../src/SyncEvent/index.js"],"names":["SyncEvent","constructor","resource","batchId","socket","patches","hasBeenCommitted"],"mappings":";;;;;;;AAAA;;AAEO,MAAMA,SAAN,CAAgB;AAEnBC,EAAAA,WAAW,CAAC;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,OAAO,GAAG,IAAtB;AAA4BC,IAAAA,MAAM,GAAG;AAArC,GAAD,EAA6C;AACpD,+BAAgBF,QAAhB;AACA,SAAKC,OAAL,GAAeA,OAAO,GAAGA,OAAH,GAAa,uBAAYD,QAAZ,CAAnC;AAEA,SAAKA,QAAL,GAAgBA,QAAhB;AACA,SAAKE,MAAL,GAAcA,MAAd;AACA,SAAKC,OAAL,GAAe,sBAAWH,QAAX,EAAqB,KAAKC,OAA1B,CAAf;AAEA,oCAAqB,KAAKD,QAA1B,EAAoC,KAAKG,OAAzC;AACH;;AAEDC,EAAAA,gBAAgB,GAAE;AACd,sCAAuB,KAAKJ,QAA5B,EAAsC,KAAKG,OAA3C;AACH;;AAfkB;;QAAVL,S,GAAAA,S","sourcesContent":["import { stageNewPatches, mergeBatch, createBatch, stageLatentMutations, unstageLatentMutations } from \"../core\"\r\n\r\nexport class SyncEvent {\r\n\r\n    constructor({ resource, batchId = null, socket = null }){\r\n        stageNewPatches(resource)\r\n        this.batchId = batchId ? batchId : createBatch(resource)\r\n\r\n        this.resource = resource \r\n        this.socket = socket\r\n        this.patches = mergeBatch(resource, this.batchId)\r\n\r\n        stageLatentMutations(this.resource, this.patches)\r\n    }\r\n\r\n    hasBeenCommitted(){\r\n        unstageLatentMutations(this.resource, this.patches)\r\n    }\r\n\r\n}"],"file":"index.js"}