"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SyncEvent = undefined;

var _core = require("../core");

class SyncEvent {
  constructor({
    resource,
    batchId = null,
    socket = null
  }) {
    (0, _core.stageNewPatches)(resource);
    this.batchId = batchId ? batchId : (0, _core.createBatch)(resource);
    this.resource = resource;
    this.socket = socket;
    this.patches = (0, _core.mergeBatch)(resource, this.batchId);
    (0, _core.stageLatentMutations)(this.resource, this.patches);
  }

  hasBeenCommitted() {
    (0, _core.unstageLatentMutations)(this.resource, this.patches);
  }

}

exports.SyncEvent = SyncEvent;
//# sourceMappingURL=index.js.map